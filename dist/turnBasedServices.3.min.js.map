{"version":3,"file":"turnBasedServices.3.min.js","sources":["turnBasedServices.3.js"],"names":["createUrlParams","query","location","search","substr","result","split","forEach","part","item","decodeURIComponent","resizeMapArea","params","rescale","image","document","getElementById","imageId","map","mapId","widthScale","width","originalWidth","heightScale","height","originalHeight","areaElements","getElementsByTagName","areaIndex","length","areaElement","originalCoords","getAttribute","setAttribute","coords","coordsPercent","i","coordNum","Number","Math","round","toString","addEventListener","setInterval","createTranslateService","getFirstBrowserLanguage","language","nav","window","navigator","browserLanguagePropertyKeys","angular","isArray","languages","getLocale","join","indexOf","array","searchElement","len","negotiateLocale","preferred","avail","locale","lowercase","n","$availableLanguageKeys","push","parts","getLanguage","lang","urlParams","Error","translate","translationId","interpolateParams","angularTranslations","translation","$interpolate","angularTranslationLanguages","console","log","myStorage","getItem","angularTranslationsLoaded","codeToL10N","setItem","script","write","translateService","emulatorServicesCompilationDate","makeShort","str","substring","key","localStorage","stringValue","info","fromJson","value","toJson","stateService","setSimulateServerDelayMilliseconds","_simulateServerDelayMilliseconds","simulateServerDelayMilliseconds","setPlayMode","_playMode","playMode","setRandomSeed","_randomSeed","randomSeed","setPlayers","_playersInfo","playersInfo","initNewMatch","game","throwError","currentState","lastState","currentVisibleTo","lastVisibleTo","lastMove","turnIndexBeforeMove","turnIndex","endMatchScores","moveNumber","getKeys","object","Object","keys","clone","obj","copy","isNull","undefined","args","_i","arguments","error","msg","getMoveForPlayerIndex","playerIndex","move","moveForPlayer","k","operation","set","visibleToPlayerIndexes","getStateForPlayerIndex","gameState","visibleTo","shuffle","keysCopy","slice","index","randomFromTo","removed","splice","from","to","floor","random","processApiOperation","setTurn","setRandomInteger","setVisibility","endMatch","setTurnOrEndMatchCount","scores","$timeout","opShuffle","shuffledKeys","oldGameState","oldVisibleTo","j","fromKey","toKey","opDelete","randomValue","opSet","getYourPlayerIndex","getMatchState","setMatchState","data","delayedSendUpdateUi","moveForIndex","stateBeforeMove","stateAfterMove","isMoveOk","turnIndexAfterMove","numberOfPlayers","updateUI","yourPlayerIndex","sendUpdateUi","makeMove","operations","seedrandom","setGame","_game","getEndMatchScores","messageService","sendMessage","message","gameUrl","parent","postMessage","addMessageListener","listener","event","source","$rootScope","$apply","gameService","lastUpdateUI","wasYourTurn","isLocalTesting","getPlayers","actualNumberOfPlayers","minNumberOfPlayers","maxNumberOfPlayers","playerId","avatarImageUrl","displayName","didCallSetGame","lastMessage","isMoveOkResult","gameReady","alphaBetaService","alphaBetaDecision","startingState","getNextStates","getStateScoreForIndex0","getDebugStateToString","alphaBetaLimits","millisecondsLimit","maxDepth","startTime","Date","getTime","getScoreForIndex0","NEGATIVE_INFINITY","POSITIVE_INFINITY","bestState","nextBestStateAndScore","nextBestScore","bestScore","nextBestState","isWin","isHalfTimePassed","isTimeout","isAllTimePassed","depth","alpha","beta","states","state","scoreForIndex0","max","min","resizeGameAreaService","setWidthToHeight","_widthToHeight","widthToHeight","gameArea","doc","oldSizes","round2","num","originalWindowWidth","innerWidth","originalWindowHeight","innerHeight","windowWidth","windowHeight","logSaver","style","display","newWidthToHeight","keepMargin","position","left","top","$translate","module","filter","$parse","isObject","this","dragAndDropService","addDragListener","touchElementId","handleDragEvent","touchHandler","touch","changedTouches","handleEvent","type","clientX","clientY","mouseDownHandler","isMouseDown","mouseMoveHandler","mouseUpHandler","preventDefault","stopPropagation","cancelBubble","returnValue","$location","$interval","run","_location","_rootScope","_timeout","_interval","_interpolate","factory","angularErrorHandler","exception","cause","lines","stack","replace","JSON","stringify","getLogs","errStr","emailJavaScriptError","onerror","errorMsg","url","lineNumber","column","errorObj"],"mappings":"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"}